"use strict";(()=>{var e={};e.id=505,e.ids=[505],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5119:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var n={};t.r(n),t.d(n,{GET:()=>d});var a=t(9303),s=t(8716),o=t(670),i=t(4191),u=t(3077);async function d(e,{params:r}){try{await (0,i.Z)();let{id:e}=r,t=await u.Z.findOne({"streams.playbackId":e},{"streams.$":1});if(!t||0===t.streams.length)return new Response(JSON.stringify({error:"Stream not found"}),{status:404});return new Response(JSON.stringify(t.streams[0]),{status:200})}catch(e){return console.error("Error fetching stream:",e),new Response(JSON.stringify({error:e.message}),{status:500})}}require("mongodb");let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/streams/[id]/route",pathname:"/api/streams/[id]",filename:"route",bundlePath:"app/api/streams/[id]/route"},resolvedPagePath:"D:\\Blive Update\\Frontend\\myapp\\app\\api\\streams\\[id]\\route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:m}=c,g="/api/streams/[id]/route";function f(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},4191:(e,r,t)=>{t.d(r,{Z:()=>u});var n=t(1185),a=t.n(n);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=null,i=null,u=async function(){if(i)return console.log("Using cached database connection"),{client:o,db:i};console.log("Connecting to new database");try{let e=await a().connect(s,{useNewUrlParser:!0,useUnifiedTopology:!0});return o=e,i=e.connection.db,console.log("Database connection successful"),{client:e,db:i}}catch(e){throw console.error("Error connecting to the database:",e),e}}},3077:(e,r,t)=>{t.d(r,{Z:()=>o});var n=t(1185),a=t.n(n);let s=new(a()).Schema({address:{type:String,required:!0,unique:!0},userName:{type:String},emailId:{type:String,required:!0},fullName:{type:String,required:!0},streams:[{streamId:String,streamKey:String,playbackUrl:String,playbackId:String,createdAt:Date,status:String,streamTitle:String}]}),o=a().models.User||a().model("User",s)},9303:(e,r,t)=>{e.exports=t(517)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[948],()=>t(5119));module.exports=n})();
(()=>{var e={};e.id=566,e.ids=[566],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9503:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(1665),r(7764),r(5866);var a=r(3191),s=r(8716),n=r(7922),i=r.n(n),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["startStream",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1665)),"D:\\Blive Update\\Frontend\\myapp\\app\\startStream\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7764)),"D:\\Blive Update\\Frontend\\myapp\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Blive Update\\Frontend\\myapp\\app\\startStream\\page.js"],u="/startStream/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/startStream/page",pathname:"/startStream",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2398:(e,t,r)=>{Promise.resolve().then(r.bind(r,7934))},1572:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},9462:()=>{},7934:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(326),s=r(7577),n=r(5047),i=r(986),o=r.n(i),l=r(5849);r(9678);let c=()=>{let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(null),[u,p]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),x=(0,n.useRouter)(),[v,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{let e=await o()();e?h((await e.request({method:"eth_requestAccounts"}))[0]):console.error("MetaMask not detected")})()},[]);let f=async()=>{if(!e.trim()){i("Stream title is required");return}if(!m){i("User address is required");return}i("Creating stream...");try{let t=await fetch("/api/create-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streamTitle:e,address:m})}),r=await t.json();if(t.ok){d(r),p(r.status),i("Stream created successfully!");let e=setInterval(()=>g(r.streamId),2e3);b(e)}else i(`Error creating stream: ${r.error}`)}catch(e){console.error("Error creating stream:",e),i("Error creating stream")}},g=async e=>{try{let t=await fetch(`/api/stream-status?streamId=${e}`),r=await t.json();t.ok&&(p(r.status),await fetch("/api/update-stream-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streamId:e,status:r.status})}),"active"===r.status&&clearInterval(v))}catch(e){console.error("Error checking stream status:",e)}},y=async e=>{try{await navigator.clipboard.writeText(e),alert("Stream Key copied to clipboard!")}catch(e){console.error("Failed to copy text:",e),alert("Failed to copy text.")}};return(0,a.jsxs)("div",{className:"p-4 max-w-4xl ",children:[a.jsx(l.Z,{}),(0,a.jsxs)("div",{className:"wholeContainer",children:[a.jsx("h1",{className:"text-2xl font-bold text1",children:"Start Stream"}),(0,a.jsxs)("div",{className:"flex ",children:[(0,a.jsxs)("div",{className:"inputandbtn",children:[c?a.jsx("button",{onClick:()=>{if("active"===u){i("Stop streaming before finishing.");return}t(""),i(""),d(null),p(""),h(""),b(null),x.reload()},className:`p-2 text-white rounded-md transition doneBtn  ${"active"===u?"bg-gray-500":"bg-red-500"}`,disabled:"active"===u,children:"Done Streaming"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("input",{type:"text",placeholder:"Enter stream title",value:e,onChange:e=>t(e.target.value),className:"inputBox"}),a.jsx("button",{onClick:f,className:"goliveBtn",children:"Go Live"})]}),r&&a.jsx("p",{className:"mt-4",children:r}),c&&(0,a.jsxs)("div",{className:"mt-4 space-y-2 details",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Stream Title:"})," ",e]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"RTMP URL:"})," ",c.rtmpUrl]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Stream Key: "}),a.jsx("span",{className:"copy-text","data-clipboard-text":c.streamKey,onClick:()=>y(c.streamKey),children:c.streamKey})]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Playback URL:"})," ",c.playbackUrl]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Stream ID:"})," ",c.streamId]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Playback ID:"})," ",c.playbackId]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Created At:"})," ",new Date(c.createdAt).toLocaleString()]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Status:"})," ",u]})]})]}),a.jsx("div",{className:"checkdiv  aspect-video",children:"active"===u&&c&&a.jsx("iframe",{src:`https://lvpr.tv?v=${c.playbackId}`,allowFullScreen:!0,allow:"autoplay; encrypted-media; fullscreen; picture-in-picture",frameBorder:"0",className:"h-full w-full"})})]})]})]})}},5849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(326),s=r(7577),n=r(5047);function i(){let[e,t]=(0,s.useState)(!1),r=(0,n.useRouter)();return a.jsx("nav",{className:"shadow-lg ",children:(0,a.jsxs)("div",{className:"container px-4 py-2 flex justify-between items-center h-10 ",children:[a.jsx("div",{onClick:()=>{r.push("/")},className:"font-bold title",children:"<Blive/>"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>{r.push("/startStream")},className:"startbutton container h-10 w-32 font-thin mt-4 text-center text-sm bg-black sepia rounded-md mb-4",children:"Start Stream"}),a.jsx("button",{onClick:()=>{r.push("/watch")},className:"watchbutton container h-10 w-32 font-thin mt-4 text-center text-sm bg-black sepia rounded-md mb-4",children:"Watch Stream"})]})]})})}r(3630)},986:e=>{"use strict";e.exports=function({mustBeMetaMask:e=!1,silent:t=!1,timeout:r=3e3}={}){(function(){if("boolean"!=typeof e)throw Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof t)throw Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")})();let a=!1;return new Promise(s=>{window.ethereum?n():(window.addEventListener("ethereum#initialized",n,{once:!0}),setTimeout(()=>{n()},r));function n(){if(a)return;a=!0,window.removeEventListener("ethereum#initialized",n);let{ethereum:r}=window;if(r&&(!e||r.isMetaMask))s(r);else{let a=e&&r?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";t||console.error("@metamask/detect-provider:",a),s(null)}}})}},5047:(e,t,r)=>{"use strict";var a=r(7389);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7764:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var a=r(9510),s=r(2002),n=r.n(s);r(7272);let i={title:"Create Next App",description:"Generated by create next app"};function o({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:n().className,children:e})})}},1665:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=r(8570);let s=(0,a.createProxy)(String.raw`D:\Blive Update\Frontend\myapp\app\startStream\page.js`),{__esModule:n,$$typeof:i}=s;s.default;let o=(0,a.createProxy)(String.raw`D:\Blive Update\Frontend\myapp\app\startStream\page.js#default`)},7272:()=>{},3630:()=>{},9678:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,950],()=>r(9503));module.exports=a})();